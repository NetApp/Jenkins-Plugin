<?xml version='1.0' encoding='UTF-8'?>
<com.cloudbees.hudson.plugins.modeling.impl.builder.BuilderTemplate plugin="cloudbees-template@4.21">
  <actions/>
  <description>Creates workspace for developers.</description>
  <displayName>Create User Workspace (NetApp)</displayName>
  <attributes>
    <template-attribute>
      <name>vs</name>
      <displayName>Storage Tenant</displayName>
      <helpHtml>Provide the name of the SVM.

SVM names can be listed by using the &quot;List SVM and Aggregates (NetApp)&quot; step.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl">
        <options>
          <com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
            <displayName>lab1</displayName>
            <value>lab1</value>
            <inlineHelp></inlineHelp>
          </com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
        </options>
        <mode>DROPDOWN_LIST</mode>
      </control>
    </template-attribute>
    <template-attribute>
      <name>ag</name>
      <displayName>Aggregate Name</displayName>
      <helpHtml>Provide the name of the Aggregate.

Aggregate names can be listed by using the &quot;List SVM and Aggregates (NetApp)&quot; step.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl">
        <options>
          <com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
            <displayName>aggr1_01</displayName>
            <value>aggr1_01</value>
            <inlineHelp></inlineHelp>
          </com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
          <com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
            <displayName>aggr1_02</displayName>
            <value>aggr1_02</value>
            <inlineHelp></inlineHelp>
          </com.cloudbees.hudson.plugins.modeling.controls.ChoiceControl_-Option>
        </options>
        <mode>DROPDOWN_LIST</mode>
      </control>
    </template-attribute>
    <template-attribute>
      <name>bpname</name>
      <displayName>CI Development Branch Name</displayName>
      <helpHtml>Provide the name of CI Development Branch that needs to be cloned to the developers&apos; workspace.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.TextFieldControl"/>
    </template-attribute>
    <template-attribute>
      <name>snap</name>
      <displayName>Checkpoint Name for Creating Developer Workspace</displayName>
      <helpHtml>Provide the name of the checkpoint that will be used to create the workspace. 

Checkpoints can be listed by using &quot;List Checkpoint and Workspace (NetApp)&quot; step.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.TextFieldControl"/>
    </template-attribute>
    <template-attribute>
      <name>lwsname</name>
      <displayName>Local Developer Workspace Name</displayName>
      <helpHtml>Provide the name for developer&apos;s workspace.

Example: netappdvp_mylocal_ws_1 

Make sure &quot;netappdvp_&quot; is added as the prefix to the name.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.TextFieldControl"/>
    </template-attribute>
    <template-attribute>
      <name>uid</name>
      <displayName>User ID of Developer</displayName>
      <helpHtml>Provide User ID of Developer.</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.TextFieldControl"/>
    </template-attribute>
    <template-attribute>
      <name>gid</name>
      <displayName>Group ID of Developer</displayName>
      <helpHtml>Provide Group ID of Developer</helpHtml>
      <control class="com.cloudbees.hudson.plugins.modeling.controls.TextFieldControl"/>
    </template-attribute>
  </attributes>
  <properties/>
  <instantiable>true</instantiable>
  <help>This step will create a local workspace for the developers.</help>
  <transformer class="com.cloudbees.hudson.plugins.modeling.impl.builder.RuntimeGroovyShellScriptTransformer">
    <script>python /tmp/ps/user_workspace_creation.py -v ${bpname} -a  \${APISERVER} -s ${snap} -c ${lwsname} -apiuser  \${APIUSER} -apipass \${APIPASS} -uid ${uid} -gid ${gid}
        
python /tmp/ps/Jenkins_slave_create.py -i \${SLAVE} -c ${lwsname} -l ${lwsname} -p \${JOB_NAME} -v ${lwsname} -m \${JENKINS_URL}</script>
    <batch>false</batch>
    <sandbox>false</sandbox>
  </transformer>
</com.cloudbees.hudson.plugins.modeling.impl.builder.BuilderTemplate>